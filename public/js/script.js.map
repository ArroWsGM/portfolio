{"version":3,"sources":["script.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"script.js","sourcesContent":["/*\r\n * console.log();\r\n */\r\nfunction echo(string){\r\n\tconsole.log(string);\r\n}\r\n////////////////////////////////////////////////////////////////////////\r\n\r\n/*****************************************\r\n *\tGlobal variables\r\n *****************************************/\r\nvar hashTagActive = '';\r\nvar mainBlockSizeMult = 1.75, blocked = false;\r\nvar div = {}, touchtar;\r\n/* mobile detector */\r\nvar isMobile = {\r\n\tAndroid: function() {\r\n\t\treturn navigator.userAgent.match(/Android/i);\r\n\t},\r\n\tBlackBerry: function() {\r\n\t\treturn navigator.userAgent.match(/BlackBerry/i);\r\n\t},\r\n\tiOS: function() {\r\n\t\treturn navigator.userAgent.match(/iPhone|iPad|iPod/i);\r\n\t},\r\n\tOpera: function() {\r\n\t\treturn navigator.userAgent.match(/Opera Mini/i);\r\n\t},\r\n\tWindows: function() {\r\n\t\treturn navigator.userAgent.match(/IEMobile/i);\r\n\t},\r\n\tNokiaBrowser: function() {\r\n\t\treturn navigator.userAgent.match(/NokiaBrowser/i);\r\n\t},\r\n\tany: function() {\r\n\t\treturn (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows() || isMobile.NokiaBrowser());\r\n\t}\r\n};\r\n/*****************************************\r\n *\tFunctions\r\n *****************************************/\r\n //chain fadeTo animation\r\nfunction showChain(elem){\r\n\telem.fadeTo('fast', 1, function(){\r\n\t\t$(this).next().length && showChain($(this).next());\r\n\t});\r\n}\r\n//return cross-browser window width & height\r\nfunction viewport() {\r\n\tvar e = window, a = 'inner';\r\n\tif (!('innerWidth' in window)) {\r\n\t\ta = 'client';\r\n\t\te = document.documentElement || document.body;\r\n\t}\r\n\treturn { width : e[ a+'Width' ] , height : e[ a+'Height' ] };\r\n}\r\nfunction isPortrait(){\r\n\treturn viewport().width<=viewport().height ? true : false;\r\n}\r\nfunction rotate(dir){\r\n\tif(blocked) return;\r\n\t\r\n\tvar slide = $('.carousel-item');\r\n\tvar slideWidth = slide.eq(0).width();\r\n\tvar margin1, margin2;\r\n\t\r\n\tif(isMobile.any() && !isPortrait() && viewport().width<768){\r\n\t\tmargin1 = '28%';\r\n\t\tmargin2 = '35%';\r\n\t}\r\n\telse if(isMobile.any() && isPortrait() && viewport().width<768){\r\n\t\tmargin1 = '6%';\r\n\t\tmargin2 = '30%';\r\n\t}\r\n\telse{\r\n\t\tmargin1 = '37.75%';\r\n\t\tmargin2 = '26%';\r\n\t}\r\n\t\r\n\tblocked = true;\r\n\tslide.attr('style', '');\r\n\t\r\n\tif(dir=='next'){\r\n\t\tslide.eq(0).animate({\r\n\t\t\tleft: margin1,\r\n\t\t\twidth: slideWidth*mainBlockSizeMult,\r\n\t\t\theight: slideWidth*mainBlockSizeMult,\r\n\t\t\tzIndex: 2\r\n\t\t}, {\r\n\t\t\tstep: function(now, fx){\r\n\t\t\t\tif (fx.prop == 'zIndex')\r\n\t\t\t\t\tif (now>1.5) $(this).css('zIndex', 2);\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.eq(1).animate({\r\n\t\t\tleft: margin2,\r\n\t\t\twidth: slideWidth,\r\n\t\t\theight: slideWidth,\r\n\t\t\tzIndex: 1\r\n\t\t}, {\r\n\t\t\tstep: function(now, fx){\r\n\t\t\t\tif (fx.prop == 'zIndex')\r\n\t\t\t\t\tif (now<1.5) $(this).css('zIndex', 1);\r\n\t\t\t\t\t//echo(fx);\r\n\t\t\t},\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t\tslide.last().prependTo(slide.parent());\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.eq(2).css('zIndex', 0).animate({\r\n\t\t\tright: '50%',\r\n\t\t\twidth: slideWidth/2,\r\n\t\t\theight: slideWidth/2\r\n\t\t}, {\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.last().css('zIndex', 0).animate({\r\n\t\t\tright: margin2,\r\n\t\t\twidth: slideWidth,\r\n\t\t\theight: slideWidth\r\n\t\t}, {\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t\tblocked = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\telse{\r\n\t\tslide.eq(3).css('zIndex', 0).animate({\r\n\t\t\tleft: margin2,\r\n\t\t\twidth: slideWidth,\r\n\t\t\theight: slideWidth\r\n\t\t}, {\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.eq(2).animate({\r\n\t\t\tright: margin1,\r\n\t\t\twidth: slideWidth*mainBlockSizeMult,\r\n\t\t\theight: slideWidth*mainBlockSizeMult,\r\n\t\t\tzIndex: 2\r\n\t\t}, {\r\n\t\t\tstep: function(now, fx){\r\n\t\t\t\tif (fx.prop == 'zIndex')\r\n\t\t\t\t\tif (now>1.5) $(this).css('zIndex', 2);\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.eq(1).animate({\r\n\t\t\tright: margin2,\r\n\t\t\twidth: slideWidth,\r\n\t\t\theight: slideWidth,\r\n\t\t\tzIndex: 1\r\n\t\t}, {\r\n\t\t\tstep: function(now, fx){\r\n\t\t\t\tif (fx.prop == 'zIndex')\r\n\t\t\t\t\tif (now<1.5) $(this).css('zIndex', 1);\r\n\t\t\t\t\t//echo(fx);\r\n\t\t\t},\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t\tslide.first().appendTo(slide.parent());\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.eq(0).css('zIndex', 0).animate({\r\n\t\t\tleft: '50%',\r\n\t\t\twidth: slideWidth/2,\r\n\t\t\theight: slideWidth/2\r\n\t\t}, {\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t\tblocked = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n/*****************************************\r\n *\tEvent listeners\r\n *****************************************/\r\n//scroll to anchor\r\n$(document).on('click', '.scroll', function(e){\r\n\te=e||window.event;\r\n\te.preventDefault();\r\n\tif(hashTagActive != this.hash) { //this will prevent if the user click several times the same link to freeze the scroll.\r\n\t\t//calculate destination place\r\n\t\tvar dest=0;\r\n\t\tif ($(this.hash).offset().top > $(document).height() - $(window).height()) {\r\n\t\t\tdest=$(document).height() - $(window).height();\r\n\t\t} else {\r\n\t\t\tdest=$(this.hash).offset().top;\r\n\t\t}\r\n\t\t//go to destination\r\n\t\thashTagActive=this.hash;\r\n\t\t$('html, body').animate({\r\n\t\t\tscrollTop: dest\r\n\t\t}, 1000, 'swing', function(){\r\n\t\t\thashTagActive=\"\";\r\n\t\t});\r\n\t}\r\n});\r\n$(window).on('resize', function(){\r\n\tsetTimeout(function(){\r\n\t\t//echo(isPortrait());\r\n\t}, 500);\r\n});\r\n$(document).on('click', '.control', function(e){\r\n\te=e||window.event;\r\n\te.preventDefault();\r\n\te.stopImmediatePropagation();\r\n\tif($(this).hasClass('next')){\r\n\t\trotate('next');\r\n\t}\r\n\telse{\r\n\t\trotate('prev');\r\n\t}\r\n});\r\n$(document).on('click', '.carousel-item:first-child', function(){\r\n\trotate('next');\r\n});\r\n$(document).on('click', '.carousel-item:nth-child(3)', function(){\r\n\trotate('prev');\r\n});\r\n$(document).on('click', '.carousel-item:nth-child(2)', function(){\r\n\t$('body').css('overflow', 'hidden');\r\n\t$('.popup').fadeIn();\r\n});\r\n$(document).on('touchstart', '.carousel', function(e){\r\n\te=e||window.event;\r\n\te.preventDefault();\r\n\te.stopImmediatePropagation();\r\n\ttry{\r\n\t\ttouchtar=$(e.target);\r\n\t}catch(err){\r\n\t\ttouchtar=$(e.srcElement);\r\n\t}\r\n\t\r\n\tvar touch = e.originalEvent.targetTouches[0];\r\n\t//div = {touchstartX: undefined, touchendX: undefined};\r\n\tdiv.touchstartX = undefined;\r\n\tdiv.touchendX = undefined;\r\n\tdiv.touchstartY = undefined;\r\n\tdiv.touchendY = undefined;\r\n\tdiv = this;\r\n\t\r\n\t//Сохраняем координаты объекта и курсора перед началом движения\r\n\tdiv.touchstartX = touch.pageX;\r\n\tdiv.touchstartY = touch.pageY;\r\n\t\r\n\t$(document).on('touchmove', '.carousel', function(e){\r\n\t\te=e||window.event;\r\n\t\tvar touch=e.originalEvent.targetTouches[0];\r\n\t\tdiv.touchendX = touch.pageX;\r\n\t\tdiv.touchendY = touch.pageY;\r\n\t});\r\n})\r\n.on('touchend', function(e){\r\n\tvar dir;\r\n\tvar x=div.touchendX-div.touchstartX;\r\n\tvar y=div.touchendY-div.touchstartY;\r\n\tif(Math.max(Math.abs(x), Math.abs(y))>40){\r\n\t\tif(Math.abs(x)>Math.abs(y))\r\n\t\t\tdir=(x<0)?'left':'right';\r\n\t\telse\r\n\t\t\tdir=(y<0)?'up':'down';\r\n\t\tif(dir == 'left')\r\n\t\t\trotate('prev');\r\n\t\telse if(dir == 'right')\r\n\t\t\trotate('next');\r\n\t\telse\r\n\t\t$('html,body').animate({\r\n\t\t\tscrollTop: -y\r\n\t\t}, 'fast');\r\n\t}\r\n\telse{\r\n\t\tif(touchtar.parents('.control').length)\r\n\t\t\t(touchtar.parents('.control').hasClass('prev')) ? rotate('prev') : rotate('next');\r\n\t\telse if(touchtar.parents('.carousel-item').length)\r\n\t\t\tswitch(touchtar.parents('.carousel-item').index()){\r\n\t\t\t\tcase 0: rotate('next'); break;\r\n\t\t\t\tcase 1: $('body').css('overflow', 'hidden'); $('.popup').fadeIn(); break;\r\n\t\t\t\tcase 2: rotate('prev'); break;\r\n\t\t\t\tdefault: return false;\r\n\t\t\t}\r\n\t}\r\n});\r\n/* Popup */\r\n$(document).on('click', '.close-button', function(){\r\n\tvar target = $($(this).data('target'));\r\n\ttarget.fadeOut(function(){$('body').css('overflow', 'auto')});\r\n});\r\n$(document).on('click', '.popup', function(e){\r\n\te=e||window.event;\r\n\ttry{\r\n\t\ttar=e.target;\r\n\t}catch(err){\r\n\t\ttar=e.srcElement;\r\n\t}\r\n\t\r\n\tif($(tar).parents('.popup-child').length) return;\r\n\tif($(tar).hasClass('popup-child')) return;\r\n\t\r\n\t$(this).fadeOut(function(){$('body').css('overflow', 'auto')});\r\n});\r\n\r\n$(document).on('click', '.btn-play', function(e){\r\n\te=e||window.event;\r\n\te.stopImmediatePropagation();\r\n\t\r\n\tvar video = $($(this).data('target'));\r\n\t$(this).parent('.play').hide();\r\n\tvideo[0].play();\r\n});\r\n$(document).on('click', 'video', function(e){\r\n\te=e||window.event;\r\n\te.stopImmediatePropagation();\r\n\t\r\n\t$(this)[0].paused ? $(this)[0].play() : $(this)[0].pause();\r\n});\r\n/***********************\r\n ***********************\r\n *\tAJAX load & errors *\r\n ***********************\r\n ***********************/\r\n\t$(document).on('ajaxStart', function(){\r\n\t\t$('.loadanimation').show();\r\n\t});\r\n\t$(document).on('ajaxStop', function(){\r\n\t\t$('.loadanimation').hide();\r\n\t});\r\n\t$(document).ajaxError(function(event, jqxhr, settings, thrownError){\r\n\t\tconsole.log(event);\r\n\t\tconsole.log(jqxhr.responseText);\r\n\t\tconsole.log(settings);\r\n\t\tconsole.log(thrownError);\r\n\t});\r\n/*****************************************\r\n *\tdocument ready function\r\n *****************************************/\r\n$(function(){\r\n\t//echo(isPortrait());\r\n\t$('[data-toggle=\"tooltip\"]').tooltip()\r\n});"],"sourceRoot":"/source/"}