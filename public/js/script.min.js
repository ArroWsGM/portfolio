function echo(t){}function showChain(t){t.fadeTo("fast",1,function(){$(this).next().length&&showChain($(this).next())})}function viewport(){var t=window,e="inner";return"innerWidth"in window||(e="client",t=document.documentElement||document.body),{width:t[e+"Width"],height:t[e+"Height"]}}function isPortrait(t){return void 0==t?viewport().width<=viewport().height:t[0].naturalHeight>=t[0].naturalWidth}function rotate(t){if(!blocked){var e,a,o=$(".carousel-item"),n=o.eq(0).width(),i=1;isMobile.any()&&!isPortrait()&&viewport().width<768?(e="28%",a="35%"):isMobile.any()&&isPortrait()&&viewport().width<768?(e="6%",a="30%"):(e="37.75%",a="26%"),blocked=!0,o.attr("style",""),"next"==t?(o.eq(0).animate({left:e,width:n*mainBlockSizeMult,height:n*mainBlockSizeMult,zIndex:2,fontSize:1.9*i+"em"},{step:function(t,e){"zIndex"==e.prop&&t>1.5&&$(this).css("zIndex",2)}}),o.eq(1).animate({left:a,width:n,height:n,zIndex:1,fontSize:i+"em"},{step:function(t,e){"zIndex"==e.prop&&1.5>t&&$(this).css("zIndex",1)},complete:function(){o.attr("style",""),o.last().prependTo(o.parent())}}),o.eq(2).css("zIndex",0).animate({right:"50%",width:n/2,height:n/2,fontSize:i/1.9+"em"},{complete:function(){o.attr("style","")}}),o.last().css("zIndex",0).animate({right:a,width:n,height:n,fontSize:i+"em"},{complete:function(){o.attr("style",""),blocked=!1}})):(o.eq(3).css("zIndex",0).animate({left:a,width:n,height:n,fontSize:i+"em"},{complete:function(){o.attr("style","")}}),o.eq(2).animate({right:e,width:n*mainBlockSizeMult,height:n*mainBlockSizeMult,zIndex:2,fontSize:1.9*i+"em"},{step:function(t,e){"zIndex"==e.prop&&t>1.5&&$(this).css("zIndex",2)}}),o.eq(1).animate({right:a,width:n,height:n,zIndex:1,fontSize:i+"em"},{step:function(t,e){"zIndex"==e.prop&&1.5>t&&$(this).css("zIndex",1)},complete:function(){o.attr("style",""),o.first().appendTo(o.parent())}}),o.eq(0).css("zIndex",0).animate({left:"50%",width:n/2,height:n/2,fontSize:i/1.9+"em"},{complete:function(){o.attr("style",""),blocked=!1}}))}}function getProjectAjax(t,e){$.ajax({url:t,type:"GET",beforeSend:function(){$("#project").empty()},success:function(t){t.success?($("#project").html(t.success).fadeIn(),$("#gallery").height($("#gallery").width()/1.6)):echo(t.error)},error:function(t,e,a,o){}})}function showProject(t){$("body").css("overflow","hidden");var e=t.split("/").pop(),a=$("#_token").data("token");e==loadedProject?$("#project").fadeIn():(getProjectAjax(t,a),loadedProject=e)}function changeImg(t){var e,a=$("#gallery img"),o=a.filter(".active"),n=o.index();e="next"==t?n+1<a.length?a.eq(n+1):a.eq(0):0==n?a.eq(a.length-1):a.eq(n-1),o.animate({opacity:0},function(){o.removeClass("active").css("opacity",""),e.addClass("active").css("opacity","")}),e.animate("opacity",100)}function sendMessageAjax(t,e){$.ajax({url:t.url,data:t,type:"POST",beforeSend:function(){$("#message-form .form-group").removeClass("has-error"),$("#message-form .form-group span").remove(),$("#message-form .alert-holder .alert").remove()},success:function(t){t.success?($("#message-form .alert-holder").html('<div class="alert alert-success alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+t.success+"</div>"),$("#message-form input, #message-form textarea").val("")):$("#message-form .alert-holder").html('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+t.error+"</div>")},error:function(t,e,a,o){422==t.status&&$.each(t.responseJSON,function(t,e){switch(t){case"name":$.each(e,function(){$("#name").parents(".form-group").addClass("has-error").append('<span class="help-block">'+this+"</span>")});break;case"email":$.each(e,function(){$("#email").parents(".form-group").addClass("has-error").append('<span class="help-block">'+this+"</span>")});break;case"subject":$.each(e,function(){$("#subject").parents(".form-group").addClass("has-error").append('<span class="help-block">'+this+"</span>")});break;case"phone":$.each(e,function(){$("#phone").parents(".form-group").addClass("has-error").append('<span class="help-block">'+this+"</span>")});break;case"message":$.each(e,function(){$("#message").parents(".form-group").addClass("has-error").append('<span class="help-block">'+this+"</span>")})}})}})}var hashTagActive="",mainBlockSizeMult=1.75,blocked=!1,div={},touchtar,loadedProject,isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},NokiaBrowser:function(){return navigator.userAgent.match(/NokiaBrowser/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()||isMobile.NokiaBrowser()}};$(document).on("click","#setlocale a",function(t){t=t||window.event,t.preventDefault();var e=$(this).data("locale"),a=$("#setlocale input[name=locale]");return form=$("#setlocale"),e==a.val()?!1:(a.val(e),void form.submit())}),$(document).on("submit","#message-form",function(t){t=t||window.event,t.preventDefault();var e={},a=$("#_token").data("token");e.url=$(this).attr("action"),e.name=$("#name").val(),e.subject=$("#subject").val(),e.email=$("#email").val(),e.phone=$("#phone").val(),e.message=$("#message").val(),sendMessageAjax(e,a)}),$(document).on("click","#carousel .control",function(t){t=t||window.event,t.preventDefault(),t.stopImmediatePropagation(),rotate($(this).hasClass("next")?"next":"prev")}),$(document).on("click",".carousel-item:first-child",function(){rotate("next")}),$(document).on("click",".carousel-item:nth-child(3)",function(){rotate("prev")}),$(document).on("click",".carousel-item:nth-child(2)",function(){var t=$(this).data("url");showProject(t)}),$(document).on("touchstart",".carousel",function(t){t=t||window.event,t.preventDefault(),t.stopImmediatePropagation();try{touchtar=$(t.target)}catch(e){touchtar=$(t.srcElement)}var a=t.originalEvent.targetTouches[0];div.touchstartX=void 0,div.touchendX=void 0,div.touchstartY=void 0,div.touchendY=void 0,div=this,div.touchstartX=a.pageX,div.touchstartY=a.pageY,$(document).on("touchmove",".carousel",function(t){t=t||window.event;var e=t.originalEvent.targetTouches[0];div.touchendX=e.pageX,div.touchendY=e.pageY})}).on("touchend",".carousel",function(t){t=t||window.event,t.preventDefault(),t.stopImmediatePropagation();var e,a=div.touchendX-div.touchstartX,o=div.touchendY-div.touchstartY;if(Math.max(Math.abs(a),Math.abs(o))>40)e=Math.abs(a)>Math.abs(o)?0>a?"left":"right":0>o?"up":"down","left"==e?rotate("prev"):"right"==e?rotate("next"):$("html,body").animate({scrollTop:-o},"fast");else if(touchtar.parents(".control").length)rotate(touchtar.parents(".control").hasClass("prev")?"prev":"next");else if(touchtar.hasClass("close-button")){var n=$($(this).data("target"));n.fadeOut(function(){$("body").css("overflow","auto")})}else if(touchtar.parents(".close-button").length){var n=$(touchtar.parents(".close-button").data("target"));n.fadeOut(function(){$("body").css("overflow","auto")})}else if(touchtar.parents(".carousel-item").length)switch(touchtar.parents(".carousel-item").index()){case 0:rotate("next");break;case 1:var i=touchtar.parents(".carousel-item").data("url");showProject(i);break;case 2:rotate("prev");break;default:return!1}}),$(document).on("click",".btn-popup",function(){var t=$($(this).data("target"));t.fadeIn()}),$(document).on("click",".close-button",function(){var t=$($(this).data("target"));t.fadeOut(function(){$("body").css("overflow","auto")}),$(".img-popover").click()}),$(document).on("click",".popup",function(t){t=t||window.event;try{tar=t.target}catch(e){tar=t.srcElement}$(tar).parents(".popup-child").length||$(tar).hasClass("popup-child")||($(this).fadeOut(function(){$("body").css("overflow","auto")}),$(".img-popover").click())}),$(document).on("click","#gallery .control",function(t){t=t||window.event,t.preventDefault(),t.stopImmediatePropagation(),changeImg($(this).hasClass("next")?"next":"prev")}),$(document).on("click","#gallery img",function(){if(isMobile.any())return!1;var t=$(this).parent("#gallery").find("img.active").data("target");if(t){$(".loadanimation").show();var e=$('<img class="img-popover">').attr("src",t).on("load",function(){this.complete&&"undefined"!=typeof this.naturalWidth&&0!=this.naturalWidth?(isPortrait()||isPortrait(e)?!isPortrait()&&isPortrait(e)&&(e.height(.9*viewport().height),e.css("top",.05*viewport().height),e.width("auto"),e.css("right",0)):e[0].naturalWidth/e[0].naturalHeight<1.6?(e.width(.6*viewport().width),e.css("left",.2*viewport().width)):(e.width(.8*viewport().width),e.css("left",.1*viewport().width)),$("body").append(e),$(".loadanimation").hide()):($(".loadanimation").hide(),alert("Image loading fail"))})}}),$(document).on("click",".img-popover",function(){$(this).remove()}),$(document).on("click",".btn-play",function(t){t=t||window.event,t.stopImmediatePropagation();var e=$($(this).data("target"));$(this).parent(".play").hide(),e[0].play()}),$(document).on("click","video",function(t){t=t||window.event,t.stopImmediatePropagation(),$(this)[0].paused?$(this)[0].play():$(this)[0].pause()}),$(window).load(function(){$(".loadanimation").hide()}),$(document).on("ajaxStart",function(){$(".loadanimation").show()}),$(document).on("ajaxStop",function(){$(".loadanimation").hide()}),$(function(){$('[data-toggle="tooltip"]').tooltip(),$("#phone").inputmask("+380(99)999-99-99")});