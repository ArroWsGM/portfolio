{"version":3,"sources":["script.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"script.min.js","sourcesContent":["/*\r\n * console.log();\r\n */\r\nfunction echo(string){\r\n\tconsole.log(string);\r\n}\r\n////////////////////////////////////////////////////////////////////////\r\n\r\n/*****************************************\r\n *\tGlobal variables\r\n *****************************************/\r\nvar hashTagActive = '';\r\nvar mainBlockSizeMult = 1.75, blocked = false;\r\nvar div = {}, touchtar;\r\nvar loadedProject;\r\n/* mobile detector */\r\nvar isMobile = {\r\n\tAndroid: function() {\r\n\t\treturn navigator.userAgent.match(/Android/i);\r\n\t},\r\n\tBlackBerry: function() {\r\n\t\treturn navigator.userAgent.match(/BlackBerry/i);\r\n\t},\r\n\tiOS: function() {\r\n\t\treturn navigator.userAgent.match(/iPhone|iPad|iPod/i);\r\n\t},\r\n\tOpera: function() {\r\n\t\treturn navigator.userAgent.match(/Opera Mini/i);\r\n\t},\r\n\tWindows: function() {\r\n\t\treturn navigator.userAgent.match(/IEMobile/i);\r\n\t},\r\n\tNokiaBrowser: function() {\r\n\t\treturn navigator.userAgent.match(/NokiaBrowser/i);\r\n\t},\r\n\tany: function() {\r\n\t\treturn (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows() || isMobile.NokiaBrowser());\r\n\t}\r\n};\r\n/*****************************************\r\n *\tFunctions\r\n *****************************************/\r\n //chain fadeTo animation\r\nfunction showChain(elem){\r\n\telem.fadeTo('fast', 1, function(){\r\n\t\t$(this).next().length && showChain($(this).next());\r\n\t});\r\n}\r\n//return cross-browser window width & height\r\nfunction viewport() {\r\n\tvar e = window, a = 'inner';\r\n\tif (!('innerWidth' in window)) {\r\n\t\ta = 'client';\r\n\t\te = document.documentElement || document.body;\r\n\t}\r\n\treturn { width : e[ a+'Width' ] , height : e[ a+'Height' ] };\r\n}\r\nfunction isPortrait(img){\r\n\tif(img == undefined)\r\n\t\treturn viewport().width<=viewport().height ? true : false;\r\n\telse\r\n\t\treturn img[0].naturalHeight>=img[0].naturalWidth;\r\n}\r\nfunction rotate(dir){\r\n\tif(blocked) return;\r\n\t\r\n\tvar slide = $('.carousel-item');\r\n\tvar slideWidth = slide.eq(0).width();\r\n\tvar margin1, margin2;\r\n\tvar baseFontSize = 1;\r\n\t\r\n\tif(isMobile.any() && !isPortrait() && viewport().width<768){\r\n\t\tmargin1 = '28%';\r\n\t\tmargin2 = '35%';\r\n\t}\r\n\telse if(isMobile.any() && isPortrait() && viewport().width<768){\r\n\t\tmargin1 = '6%';\r\n\t\tmargin2 = '30%';\r\n\t}\r\n\telse{\r\n\t\tmargin1 = '37.75%';\r\n\t\tmargin2 = '26%';\r\n\t}\r\n\t\r\n\tblocked = true;\r\n\tslide.attr('style', '');\r\n\t\r\n\tif(dir=='next'){\r\n\t\tslide.eq(0).animate({\r\n\t\t\tleft: margin1,\r\n\t\t\twidth: slideWidth*mainBlockSizeMult,\r\n\t\t\theight: slideWidth*mainBlockSizeMult,\r\n\t\t\tzIndex: 2,\r\n\t\t\tfontSize: (baseFontSize*1.9)+'em',\r\n\t\t}, {\r\n\t\t\tstep: function(now, fx){\r\n\t\t\t\tif (fx.prop == 'zIndex')\r\n\t\t\t\t\tif (now>1.5) $(this).css('zIndex', 2);\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.eq(1).animate({\r\n\t\t\tleft: margin2,\r\n\t\t\twidth: slideWidth,\r\n\t\t\theight: slideWidth,\r\n\t\t\tzIndex: 1,\r\n\t\t\tfontSize: baseFontSize+'em'\r\n\t\t}, {\r\n\t\t\tstep: function(now, fx){\r\n\t\t\t\tif (fx.prop == 'zIndex')\r\n\t\t\t\t\tif (now<1.5) $(this).css('zIndex', 1);\r\n\t\t\t\t\t//echo(fx);\r\n\t\t\t},\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t\tslide.last().prependTo(slide.parent());\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.eq(2).css('zIndex', 0).animate({\r\n\t\t\tright: '50%',\r\n\t\t\twidth: slideWidth/2,\r\n\t\t\theight: slideWidth/2,\r\n\t\t\tfontSize: (baseFontSize/1.9)+'em'\r\n\t\t}, {\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.last().css('zIndex', 0).animate({\r\n\t\t\tright: margin2,\r\n\t\t\twidth: slideWidth,\r\n\t\t\theight: slideWidth,\r\n\t\t\tfontSize: baseFontSize+'em'\r\n\t\t}, {\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t\tblocked = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\telse{\r\n\t\tslide.eq(3).css('zIndex', 0).animate({\r\n\t\t\tleft: margin2,\r\n\t\t\twidth: slideWidth,\r\n\t\t\theight: slideWidth,\r\n\t\t\tfontSize: baseFontSize+'em'\r\n\t\t}, {\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.eq(2).animate({\r\n\t\t\tright: margin1,\r\n\t\t\twidth: slideWidth*mainBlockSizeMult,\r\n\t\t\theight: slideWidth*mainBlockSizeMult,\r\n\t\t\tzIndex: 2,\r\n\t\t\tfontSize: (baseFontSize*1.9)+'em'\r\n\t\t}, {\r\n\t\t\tstep: function(now, fx){\r\n\t\t\t\tif (fx.prop == 'zIndex')\r\n\t\t\t\t\tif (now>1.5) $(this).css('zIndex', 2);\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.eq(1).animate({\r\n\t\t\tright: margin2,\r\n\t\t\twidth: slideWidth,\r\n\t\t\theight: slideWidth,\r\n\t\t\tzIndex: 1,\r\n\t\t\tfontSize: baseFontSize+'em'\r\n\t\t}, {\r\n\t\t\tstep: function(now, fx){\r\n\t\t\t\tif (fx.prop == 'zIndex')\r\n\t\t\t\t\tif (now<1.5) $(this).css('zIndex', 1);\r\n\t\t\t\t\t//echo(fx);\r\n\t\t\t},\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t\tslide.first().appendTo(slide.parent());\r\n\t\t\t}\r\n\t\t});\r\n\t\tslide.eq(0).css('zIndex', 0).animate({\r\n\t\t\tleft: '50%',\r\n\t\t\twidth: slideWidth/2,\r\n\t\t\theight: slideWidth/2,\r\n\t\t\tfontSize: (baseFontSize/1.9)+'em'\r\n\t\t}, {\r\n\t\t\tcomplete: function(){\r\n\t\t\t\tslide.attr('style', '');\r\n\t\t\t\tblocked = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n//return project\r\nfunction getProjectAjax(url, token){\r\n\t$.ajax({\r\n\t\turl:url,\r\n\t\theaders: {'X-CSRF-TOKEN': token},\r\n\t\t//data:{_token: token},\r\n\t\ttype:'POST',\r\n\t\tbeforeSend: function(){\r\n\t\t\t$('#project').empty();\r\n\t\t},\r\n\t\tsuccess: function(json){\r\n\t\t\tif(json.success){\r\n\t\t\t\t$('#project').html(json.success).fadeIn();\r\n\t\t\t\t$('#gallery').height($('#gallery').width()/1.6);\r\n\t\t\t} else {\r\n\t\t\t\techo(json.error);\r\n\t\t\t}\r\n\t\t},\r\n\t\terror: function(event, jqxhr, settings, thrownError){\r\n\t\t\tconsole.log(event);\r\n\t\t\tconsole.log(jqxhr);\r\n\t\t\tconsole.log(settings);\r\n\t\t\tconsole.log(thrownError);\r\n\t\t\tconsole.log(event.responseText);\r\n\t\t}\r\n\t});\r\n}\r\n//show project\r\nfunction showProject(url){\r\n\t$('body').css('overflow', 'hidden');\r\n\t\r\n\tvar projectId = url.split('/').pop(),\r\n\t\ttoken = $('#_token').data('token');\r\n\r\n\tif(projectId == loadedProject)\r\n\t\t$('#project').fadeIn();\r\n\telse{\r\n\t\tgetProjectAjax(url, token);\r\n\t\tloadedProject = projectId;\r\n\t}\r\n}\r\n//project gallery\r\nfunction changeImg(dir){\r\n\tvar img = $('#gallery img'),\r\n\t\tcurrent = img.filter('.active'),//.index();\r\n\t\tindex = current.index(),\r\n\t\tnext;\r\n\tif(dir == 'next'){\r\n\t\tif((index+1) < img.length){\r\n\t\t\tnext = img.eq(index+1);\r\n\t\t} else {\r\n\t\t\tnext = img.eq(0);\r\n\t\t}\r\n\t} else {\r\n\t\tif((index) == 0){\r\n\t\t\tnext = img.eq(img.length-1);\r\n\t\t} else {\r\n\t\t\tnext = img.eq(index-1);\r\n\t\t}\r\n\t}\r\n\tcurrent.animate({\r\n\t\t'opacity': 0\r\n\t}, function(){\r\n\t\tcurrent.removeClass('active').css('opacity', '');\r\n\t\tnext.addClass('active').css('opacity', '');\r\n\t});\r\n\tnext.animate('opacity', 100)\r\n\t//echo(img);\r\n\t//echo(current);\r\n\t//echo(index);\r\n}\r\n\r\n//send message\r\nfunction sendMessageAjax(data, token){\r\n\t$.ajax({\r\n\t\turl:data.url,\r\n\t\theaders: {'X-CSRF-TOKEN': token},\r\n\t\tdata: data,\r\n\t\ttype:'POST',\r\n\t\tbeforeSend: function(){\r\n\t\t\t$('#message-form .form-group').removeClass('has-error');\r\n\t\t\t$('#message-form .form-group span').remove();\r\n\t\t\t$('#message-form .alert-holder .alert').remove();\r\n\t\t},\r\n\t\tsuccess: function(json){\r\n\t\t\tif(json.success){\r\n\t\t\t\t$('#message-form .alert-holder').html('<div class=\"alert alert-success alert-dismissible\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>'+json.success+'</div>');\r\n\t\t\t\t$('#message-form input, #message-form textarea').val('');\r\n\t\t\t} else {\r\n\t\t\t\t$('#message-form .alert-holder').html('<div class=\"alert alert-danger alert-dismissible\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>'+json.error+'</div>');\r\n\t\t\t}\r\n\t\t},\r\n\t\terror: function(event, jqxhr, settings, thrownError){\r\n\t\t\tif(event.status == 422){\r\n\t\t\t\t$.each(event.responseJSON, function(key, value){\r\n\t\t\t\t\tswitch(key){\r\n\t\t\t\t\t\tcase 'name':\r\n\t\t\t\t\t\t\t$.each(value, function(){\r\n\t\t\t\t\t\t\t\t$('#name').parents('.form-group').addClass('has-error').append('<span class=\"help-block\">' + this + '</span>');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'email':\r\n\t\t\t\t\t\t\t$.each(value, function(){\r\n\t\t\t\t\t\t\t\t$('#email').parents('.form-group').addClass('has-error').append('<span class=\"help-block\">' + this + '</span>');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'subject':\r\n\t\t\t\t\t\t\t$.each(value, function(){\r\n\t\t\t\t\t\t\t\t$('#subject').parents('.form-group').addClass('has-error').append('<span class=\"help-block\">' + this + '</span>');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'phone':\r\n\t\t\t\t\t\t\t$.each(value, function(){\r\n\t\t\t\t\t\t\t\t$('#phone').parents('.form-group').addClass('has-error').append('<span class=\"help-block\">' + this + '</span>');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'message':\r\n\t\t\t\t\t\t\t$.each(value, function(){\r\n\t\t\t\t\t\t\t\t$('#message').parents('.form-group').addClass('has-error').append('<span class=\"help-block\">' + this + '</span>');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(event);\r\n\t\t\t\tconsole.log(jqxhr);\r\n\t\t\t\tconsole.log(settings);\r\n\t\t\t\tconsole.log(thrownError);\r\n\t\t\t\tconsole.log(event.responseText);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n/*****************************************\r\n *\tEvent listeners\r\n *****************************************/\r\n$(document).on('submit', '#message-form', function(e){\r\n\te = e||window.event;\r\n\te.preventDefault();\r\n\tvar data = {},\r\n\t\ttoken = $('#_token').data('token');\r\n\r\n\tdata.url = $(this).attr('action');\r\n\tdata.name = $('#name').val();\r\n\tdata.subject = $('#subject').val();\r\n\tdata.email = $('#email').val();\r\n\tdata.phone = $('#phone').val();\r\n\tdata.message = $('#message').val();\r\n\r\n\t//echo(data);\r\n\t//echo(token);\r\n\r\n\tsendMessageAjax(data, token);\r\n});\r\n$(document).on('click', '#carousel .control', function(e){\r\n\te=e||window.event;\r\n\te.preventDefault();\r\n\te.stopImmediatePropagation();\r\n\tif($(this).hasClass('next')){\r\n\t\trotate('next');\r\n\t}\r\n\telse{\r\n\t\trotate('prev');\r\n\t}\r\n});\r\n$(document).on('click', '.carousel-item:first-child', function(){\r\n\trotate('next');\r\n});\r\n$(document).on('click', '.carousel-item:nth-child(3)', function(){\r\n\trotate('prev');\r\n});\r\n$(document).on('click', '.carousel-item:nth-child(2)', function(){\r\n\tvar url = $(this).data('url');\r\n\tshowProject(url);\r\n});\r\n$(document).on('touchstart', '.carousel', function(e){\r\n\te=e||window.event;\r\n\te.preventDefault();\r\n\te.stopImmediatePropagation();\r\n\ttry{\r\n\t\ttouchtar=$(e.target);\r\n\t}catch(err){\r\n\t\ttouchtar=$(e.srcElement);\r\n\t}\r\n\t\r\n\tvar touch = e.originalEvent.targetTouches[0];\r\n\t//div = {touchstartX: undefined, touchendX: undefined};\r\n\tdiv.touchstartX = undefined;\r\n\tdiv.touchendX = undefined;\r\n\tdiv.touchstartY = undefined;\r\n\tdiv.touchendY = undefined;\r\n\tdiv = this;\r\n\t\r\n\t//Сохраняем координаты объекта и курсора перед началом движения\r\n\tdiv.touchstartX = touch.pageX;\r\n\tdiv.touchstartY = touch.pageY;\r\n\t\r\n\t$(document).on('touchmove', '.carousel', function(e){\r\n\t\te=e||window.event;\r\n\t\tvar touch=e.originalEvent.targetTouches[0];\r\n\t\tdiv.touchendX = touch.pageX;\r\n\t\tdiv.touchendY = touch.pageY;\r\n\t});\r\n})\r\n.on('touchend', '.carousel', function(e){\r\n\te=e||window.event;\r\n\te.preventDefault();\r\n\te.stopImmediatePropagation();\r\n\tvar dir;\r\n\tvar x=div.touchendX-div.touchstartX;\r\n\tvar y=div.touchendY-div.touchstartY;\r\n\tif(Math.max(Math.abs(x), Math.abs(y))>40){\r\n\t\tif(Math.abs(x)>Math.abs(y))\r\n\t\t\tdir=(x<0)?'left':'right';\r\n\t\telse\r\n\t\t\tdir=(y<0)?'up':'down';\r\n\t\tif(dir == 'left')\r\n\t\t\trotate('prev');\r\n\t\telse if(dir == 'right')\r\n\t\t\trotate('next');\r\n\t\telse\r\n\t\t$('html,body').animate({\r\n\t\t\tscrollTop: -y\r\n\t\t}, 'fast');\r\n\t}\r\n\telse{\r\n\t\tif(touchtar.parents('.control').length)\r\n\t\t\t(touchtar.parents('.control').hasClass('prev')) ? rotate('prev') : rotate('next');\r\n\t\telse if(touchtar.hasClass('close-button')){\r\n\t\t\tvar target = $($(this).data('target'));\r\n\t\t\ttarget.fadeOut(function(){$('body').css('overflow', 'auto')});\r\n\t\t} else if(touchtar.parents('.close-button').length) {\r\n\t\t\tvar target = $(touchtar.parents('.close-button').data('target'));\r\n\t\t\ttarget.fadeOut(function(){$('body').css('overflow', 'auto')});\r\n\t\t} else if(touchtar.parents('.carousel-item').length)\r\n\t\t\tswitch(touchtar.parents('.carousel-item').index()){\r\n\t\t\t\tcase 0: rotate('next'); break;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tvar url = touchtar.parents('.carousel-item').data('url');\r\n\t\t\t\t\tshowProject(url);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2: rotate('prev'); break;\r\n\t\t\t\tdefault: return false;\r\n\t\t\t}\r\n\t}\r\n});\r\n$(document).on('click', '.btn-popup', function(){\r\n\tvar target = $($(this).data('target'));\r\n\ttarget.fadeIn();\r\n});\r\n\r\n/* Popup */\r\n$(document).on('click', '.close-button', function(){\r\n\tvar target = $($(this).data('target'));\r\n\ttarget.fadeOut(function(){$('body').css('overflow', 'auto')});\r\n\t$('.img-popover').click();\r\n});\r\n$(document).on('click', '.popup', function(e){\r\n\te=e||window.event;\r\n\ttry{\r\n\t\ttar=e.target;\r\n\t}catch(err){\r\n\t\ttar=e.srcElement;\r\n\t}\r\n\t\r\n\tif($(tar).parents('.popup-child').length) return;\r\n\tif($(tar).hasClass('popup-child')) return;\r\n\t\r\n\t$(this).fadeOut(function(){$('body').css('overflow', 'auto')});\r\n\t$('.img-popover').click();\r\n});\r\n$(document).on('click', '#gallery .control', function(e){\r\n\te=e||window.event;\r\n\te.preventDefault();\r\n\te.stopImmediatePropagation();\r\n\tif($(this).hasClass('next')){\r\n\t\tchangeImg('next');\r\n\t}\r\n\telse{\r\n\t\tchangeImg('prev');\r\n\t}\r\n});\r\n$(document).on('click', '#gallery img', function(){\r\n\tif(isMobile.any()) return false;\r\n\tvar target = $(this).parent('#gallery').find('img.active').data('target');\r\n\tif(target){\r\n\t\t$('.loadanimation').show();\r\n\t\tvar img = $('<img class=\"img-popover\">').attr('src', target)\r\n\t\t    .on('load', function(){\r\n\t\t        if (!this.complete || typeof this.naturalWidth == \"undefined\" || this.naturalWidth == 0) {\r\n\t\t\t\t\t$('.loadanimation').hide();\r\n\t\t            alert('Image loading fail');\r\n\t\t        } else {\r\n\t\t        \tif(!isPortrait() && !isPortrait(img)){\r\n\t\t        \t\tif(img[0].naturalWidth/img[0].naturalHeight < 1.6){\r\n\t\t\t        \t\timg.width(viewport().width*.6);\r\n\t\t\t        \t\timg.css('left', viewport().width*.2);\r\n\t\t        \t\t} else {\r\n\t\t\t        \t\timg.width(viewport().width*.8);\r\n\t\t\t        \t\timg.css('left', viewport().width*.1);\r\n\t\t        \t\t}\r\n\t\t        \t} else if(!isPortrait() && isPortrait(img)){\r\n\t\t        \t\timg.height(viewport().height*.9);\r\n\t\t        \t\timg.css('top', viewport().height*.05);\r\n\t\t        \t\timg.width('auto');\r\n\t\t        \t\timg.css('right', 0);\r\n\t\t        \t}\r\n\t\t            $('body').append(img);\r\n\t\t\t\t\t$('.loadanimation').hide();\r\n\t\t        }\r\n\t\t    });\r\n\t}\r\n});\r\n$(document).on('click', '.img-popover', function(){\r\n\t$(this).remove();\r\n});\r\n$(document).on('click', '.btn-play', function(e){\r\n\te=e||window.event;\r\n\te.stopImmediatePropagation();\r\n\t\r\n\tvar video = $($(this).data('target'));\r\n\t$(this).parent('.play').hide();\r\n\tvideo[0].play();\r\n});\r\n$(document).on('click', 'video', function(e){\r\n\te=e||window.event;\r\n\te.stopImmediatePropagation();\r\n\t\r\n\t$(this)[0].paused ? $(this)[0].play() : $(this)[0].pause();\r\n});\r\n$(window).load(function(){\r\n\t$('.loadanimation').hide();\r\n});\r\n/***********************\r\n ***********************\r\n *\tAJAX load & errors *\r\n ***********************\r\n ***********************/\r\n\t$(document).on('ajaxStart', function(){\r\n\t\t$('.loadanimation').show();\r\n\t});\r\n\t$(document).on('ajaxStop', function(){\r\n\t\t$('.loadanimation').hide();\r\n\t});\r\n/*\t$(document).ajaxError(function(event, jqxhr, settings, thrownError){\r\n\t\tconsole.log(event);\r\n\t\tconsole.log(jqxhr.responseText);\r\n\t\tconsole.log(settings);\r\n\t\tconsole.log(thrownError);\r\n\t});*/\r\n/*****************************************\r\n *\tdocument ready function\r\n *****************************************/\r\n$(function(){\r\n\t//echo(isPortrait());\r\n\t$('[data-toggle=\"tooltip\"]').tooltip();\r\n\t$('#phone').inputmask(\"+380(99)999-99-99\");\r\n});"],"sourceRoot":"/source/"}